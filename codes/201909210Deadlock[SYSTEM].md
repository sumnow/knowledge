<!--
Created: Sat Nov 16 2019 10:41:25 GMT+0800 (China Standard Time)
Modified: Sat Nov 16 2019 16:57:35 GMT+0800 (China Standard Time)
-->

# 死锁

## 定义

> 两个以上的运算单元, 双方都在等待对方停止运行, 以获取系统资源, 但是没有一方提前退出时, 就称为死锁.

即是在并发计算中, 多线程同步产生的问题. 就像在使用手机播放视频的时候, 切换到音乐, 会提示: 媒体信道被占用一样. 多数的解决方案就是终止一个进程的运行.

## 解决方法

### 哲学家就餐

不赘述, 可以看[这里](https://zh.wikipedia.org/wiki/%E5%93%B2%E5%AD%A6%E5%AE%B6%E5%B0%B1%E9%A4%90%E9%97%AE%E9%A2%98)

### 银行家算法

银行家算法, 是

1. 将进程挂起,并排序
2. 从头开始遍历
3. 判断系统持有的资源是否足够当前这个进程消费,如果不够则转到4, 够则转到5
4. 跳过这个线程
5. 分配资源, 等待进程消费完毕, 回收资源, 再跳到2.

如果找到了至少一种序列可以完成所有进程消费, 那么, 这就是它的安全序列之一.

如果没找到, 那么就有发生死锁的可能.

## 数据库中的死锁

参考[这里](https://juejin.im/post/5ab361995188255565346a93)


# 信息熵

## 问题

有2个完全相同的鸡蛋和100层楼 `(0-100)` . 可以站在某层往下扔鸡蛋, 问尝试多少次, 可以一定能获知在哪一层的时候刚好让鸡蛋碎. 

这个问题我开始以为是50次

将第一个鸡蛋从51楼扔下去, 那么如果碎了, 说明鸡蛋的承受范围在 `(0, 51)` 之间, 那么从1-50楼开始依次扔第二个鸡蛋.

如果没碎, 说明鸡蛋的承受范围在 `(51, 100]` 之间, 那么从52-100楼开始依次扔鸡蛋.

突然发现一个问题, 等等, 如果第一个蛋没有碎, 那么说明这个问题条件依然没有变化, 只是范围变成了 `(51, 100)` , 那么依然可以继续这样二分解决.

所以答案并不是这样的, 所以需要重新考虑这个问题.

## 信息熵

先把问题搁置下来, 先来听一个原理

最大熵原理是在1957 年由E. T. Jaynes 提出的, 其主要思想是, 在只掌握关于未知分布的部分知识时, 应该选取符合这些知识但熵值最大的概率分布.

因为我们不知道任何事先的信息, 这两种选择的概率都是等价的, 我们要求得最优, 就只能让它俩带来的代价一致, 也即我们应当选择N, 使得无论那种情形发生, 我们最终的尝试次数都是一致的. 

例如, 有一个骰子, 我们知道得到1的概率是1/6.

如果是一个质地不均匀的骰子呢? 它抛出1的概率是1/2, 那么, 1和其他面的概率就是1/2和1/10.

## 回到问题

那么我们考虑一下刚才的那个问题, 假设, 恰好在k楼摔碎.

那么, 假设第一个蛋在N楼抛下, 如果 `N >= k` , 那么就只能在 `(0, N-1]` 一楼一楼地扔, 那么应该需要N-1次, 再加上开始的第一次, 就是N次.

为了得到尽可能少的次数, 在 `N < k` , 的情况下, 应当是和 `N >= k` 的情况是一样的, 即也是N次, 那么在 `[N+1, 101)` 的范围中, 应该尝试N-1次.

我们发现在第一次抉择中, 我们排除了1-N这N种情况, 我们为了保证在第一个鸡蛋碎了以后, 依然可以在N-1次机会中, 逐层尝试, 那么我们就只能在N+1楼的基础上增加N-1楼, 那么如果碎了, 就用N-2次机会逐层尝试, 否则, 我们就又排除了N-1层

依次类推, 见表格

| 次数  | 测试的楼层数 | 剩余机会数 |
|-----|--------|-------|
| 1   | N      | N-1   |
| 2   | N -1   | N-2   |
| ... | ...    | ...   |
| N   | 1      | 0     |

如果一直没有碎, 那么每次测试的楼层数应当为N, N-1, N-2...1, 共计100层

那么等差数列求和公式可知, 

N(N+1) = 100 * 2

求得 `Math.ceil(N)` 为14

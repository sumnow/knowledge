# 【读薄 CSAPP】陆 系统输入输出

Linux 系统中 IO 的概念是非常有趣的, 结合『所有东西都是文件』这个抽象, 无论是输入输出重定向, 还是挂载不同的设备, 甚至是网络编程, 都可以由系统输入输出这个统一的模型来进行描述. 这一讲我们就来了解一下以 stdin, stdout 等为代表的系统输入输出.

## 学习目标

1. 理解 Unix I/O 的设计与应用
2. 了解不同的文件类型
3. 理解文件描述符(file descriptor)及在读写中的应用
4. 了解元数据的相关概念及访问方法
5. 理解输入输出重定向的实现机制
6. 简单了解 C 标准库中的标准 I/O 函数
7. 知道如何根据不同场景选择对应的 I/O 方式

## Unix I/O

在 Linux 中, 文件实际上可以看做是字节的序列. 更有意思的是, 所有的 I/O 设备也是用文件来表示的, 比如:

./dev/sda2 (/usr 磁盘分区)
/dev/tty2 (终端)
甚至连内核也是用文件来表示的:

/boot/vmlinuz-3.13.0-55-generic (内核镜像)
/proc (内核数据结构)
因为 I/O 设备也是文件, 所以内核可以利用称为 Unix I/O 的简单接口来处理输入输出, 比如使用 open() 和 close() 来打开和关闭文件, 使用 read() 和 write() 来读写文件, 或者利用 lseek() 来设定读取的偏移量等等.

为了区别不同文件的类型, 会有一个 type 来进行区别:

普通文件: 包含任意数据
目录: 相关一组文件的索引
套接字 Socket: 和另一台机器上的进程通信的类型
其实还有一些比较特别的类型, 但是这里提一下, 不深入了解:

Named pipes(FIFOs)
Symbolic links
Character and block devices


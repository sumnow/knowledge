# base64

## 转换规则: 

进行Base64转换的时候, 将3个byte(3*8bit = 24bit)的数据, 先后放入一个24bit的缓冲区中, 先来的byte占高位. 数据不足3byte的话, 于缓冲器中剩下的bit用0补足. 然后, 每次取出6个bit(24/6 = 4), 因为2^6=64, 按照其值选择ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/这64个字符中对应的字符作为编码后的输出. 不断进行, 直到全部输入数据转换完成. 当原数据长度不是3byte的整数倍时, 如果最后剩下1个输入数据, 在编码结果后加2个"="; 如果最后剩下2个输入数据, 编码结果后加1个"="; 如果没有剩下任何数据, 就什么都不要加. 

## 特点

1. Base64编码后的数据比原始数据略长, 长度约为原来的4/3. 
2. Base64编码对同一字符在不同的编码下结果可能不同. 
3. 因为编码后的+/=字符, 标准的Base64并不适合直接放在URL里传输, 有一些Base64的变种, 它们将+/等符号转换为其他符号(如_-), 这样就能安全的在URL中传输(Url Safe)了. 

## base64的意义

X.509公钥证书也好, 电子邮件数据也好, 经常要用到Base64编码, 那么为什么要作一下这样的编码呢? 

我们知道在计算机中任何数据都是按ascii码存储的, 而ascii码的128～255之间的值是不可见字符. 而在网络上交换数据时, 比如说从A地传到B地, 往往要经过多个路由设备, 由于不同的设备对字符的处理方式有一些不同, 这样那些不可见字符就有可能被处理错误, 这是不利于传输的. 所以就先把数据先做一个Base64编码, 统统变成可见字符, 这样出错的可能性就大降低了. 

Base64编码是从二进制值到某些特定字符的编码, 这些特定字符一共64个, 所以称作Base64. 为什么不直接传输二进制呢? 比如图片, 或者字符, 既然实际传输时它们都是二进制字节流. 而且即使Base64编码过的字符串最终也是二进制(通常是UTF-8编码, 兼容ASCII编码)在网络上传输的, 那么用4/3倍带宽传输数据的Base64究竟有什么意义?

真正的原因是二进制不兼容. 某些二进制值, 在一些硬件上, 比如在不同的路由器, 老电脑上, 表示的意义不一样, 做的处理也不一样. 同样, 一些老的软件, 网络协议也有类似的问题. 但是万幸, Base64使用的64个字符, 经ASCII/UTF-8编码后在大多数机器, 软件上的行为是一样的. 

[参考](http://blog.xiayf.cn/2016/01/24/base64-encoding/)

